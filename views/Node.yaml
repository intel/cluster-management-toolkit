kind: Node
default_command: nodes
command:
- "no"
listview:
  name: Nodes
  group: Core
  field_indexes:
    Wide: [name, node_status, kubernetes_roles, age, kubelet_version, internal_ips, os, kernel_version, container_runtime, cpu, mem, taints]
    Normal: [name, node_status, kubernetes_roles, age, kubelet_version, internal_ips, cpu, mem, taints]
  fields:
    kernel_version:
      header: "Kernel Version:"
      path: "status#nodeInfo#kernelVersion"
      type: version
    kubelet_version:
      header: "Version:"
      path: "status#nodeInfo#kubeletVersion"
      type: version
    taints:
      header: "Taints:"
      paths:
      - path: ["spec#taints"]
        pathtype: items
        subpaths:
        - subpath: key
          transform:
            "node-role.kubernetes.io/master": "node-role.kubernetes.io/control-plane"
          regex: ["^[^/]*/(.*)"]
        - effect
      formatter: list
      formatting:
        field_colors:
        - type: key
        - type: value
        field_separators:
        - type: keyvalue
        mapping:
          mappings:
            NoSchedule:
              field_colors:
              - context: main
                type: status_not_ok
            PreferNoSchedule:
              field_colors:
              - context: main
                type: status_warning
            NoExecute:
              field_colors:
              - context: main
                type: status_not_ok
  actions:
    playbooklist:
      context: node
  shortcuts:
    "SSH to host":
      key: s
      modifier: shift
      helptext: SSH to host
      action: call
      action_call: ssh_to_host
      action_args:
        _pass_selected: true
